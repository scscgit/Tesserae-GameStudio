<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:g="http://www.tuke.sk/games"
      xmlns:p="http://primefaces.org/ui">

    <h:head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <h:outputStylesheet library="css" name="stylesheet.css"/>
        <title>Gamestudio</title>

        <link rel="stylesheet" type="text/css" href="http://ajax.aspnetcdn.com/ajax/jquery.dataTables/1.9.4/css/jquery.dataTables.css"></link>
        <script src="https://cdn.datatables.net/1.10.11/js/jquery.dataTables.min.js"></script>

        <script type="text/javascript">
            //<![CDATA[
            $(document).ready(function() {
                $.ajax({
                    url: "webapi/score/mines",
                }).done(function(json) {
                    for(var i = 0; i < json.length; i++) {
                        var score = json[i];
                        $("#scoreList").append($("<li>" + score.player + " " + score.points + " " + score.playedOn + "</li>"));
                    }
                });
            });

            $(document).ready(function() {
                $('#example').DataTable({
                    columns: [
                        { data: "player" },
                        { data: "points" },
                        { data: "playedOn" }
                    ],
                    ajax: {url : "webapi/score/mines", dataSrc : ''}
                });
            } );

            //]]>
        </script>
    </h:head>

    <h:body>
        <h1>Minesweeper</h1>

        <h:form id="form">
            <g:mines value="#{minefield}"/>
            <p:commandButton value="New game" action="#{minefield.generate}" update="form" />
            <p:selectBooleanButton onLabel="Mark" offLabel="Open" value="#{minefield.marking}">
                <p:ajax event="change" update="form" />
            </p:selectBooleanButton>
            Score: <h:outputLabel value="#{minefield.score}"/>
            <p:calendar mode="inline"/>
        </h:form>

        <h2>Hall of fame</h2>

        <ol id="scoreList"/>

        <table id="example"/>

    </h:body>
</html>
